---
title: "결제"
categories: [ "Backend" ]
tags: [ "[인프런] 제미니 개발실무 - 커머스 백엔드 기본편" ]
date: "2025-10-25 03:22:00"
---

## 결제 흐름

![](/assets/img/posts/2025/10/2025-10-25-결제/204525922878000.png)

- 결제를 생성
- 결제 성공 및 실패 시, 결제 엔티티 값 수정
- 결제 성공 및 실패 시, 히스토리 내역 남기기

## API

### 결제 생성

```bash
POST /v1/payments
```

| Parameter        | 설명      |
|------------------|---------|
| orderKey         | 주문 키    |
| useOwnedCouponId | 사용한 쿠폰  |
| usePoint         | 사용한 포인트 |

### 결제 성공

```bash
POST /v1/payments/callback/success
```

| Parameter  |                |
|------------|----------------|
| orderId    | 주문 키(PG사 측 스펙) |
| paymentKey | 결제 키(PG사 측 스펙) |
| amount     | 금액             |

### 결제 실패

```bash
POST /v1/payments/callback/fail
```

| Parameter | 설명              |
|-----------|-----------------|
| orderId   | 주문 키(PG사 측 스펙)  |
| code      | 실패 코드(PG사 측 스펙) |
| message   | 메세지             |

## 개념도

![](/assets/img/posts/2025/10/2025-10-25-결제/204919661701750.png)

- 결제는 주문을 의존
- 결제는 결제 시, 포인트와 쿠폰을 사용하므로 포인트와 쿠폰도 의존
- `TransactionHistory`에 결제 성공 및 실패에 대한 내역 저장

## 참고

- [https://www.inflearn.com/course/제미니의-개발실무-커머스-백엔드-기본](https://www.inflearn.com/course/%EC%A0%9C%EB%AF%B8%EB%8B%88%EC%9D%98-%EA%B0%9C%EB%B0%9C%EC%8B%A4%EB%AC%B4-%EC%BB%A4%EB%A8%B8%EC%8A%A4-%EB%B0%B1%EC%97%94%EB%93%9C-%EA%B8%B0%EB%B3%B8)
